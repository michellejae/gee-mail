<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){

          var counter = document.createElement("p");
          counter.className = 'counter';
          counter.innerHTML = "Inbox" + " (" + (geemails.length) + ")";
          main.appendChild(counter);

       for (var i =0; i<geemails.length; i++) {

          var inBox = document.createElement("p");
          inBox.className = 'inbox';
          main.appendChild(inBox);

          var senderBox = document.createElement("p");
          senderBox.className = 'sender';
          senderBox.innerHTML = "sender: " + geemails[i].sender;
          inBox.appendChild(senderBox);

          var subjBox = document.createElement("p");
          subjBox.className = "subj";
          subjBox.innerHTML = "subject: " + geemails[i].subject;
          inBox.appendChild(subjBox);

          var dateBox = document.createElement("p");
          dateBox.className = 'date';
          dateBox.innerHTML = "date: " + geemails[i].date;
          inBox.appendChild(dateBox);

          var bodyBox = document.createElement("p");
          bodyBox.className = "body";
          bodyBox.innerHTML = geemails[i].body;
          bodyBox.style.display = "none";
          subjBox.appendChild(bodyBox);

          }

          /* you need to create the bodyBox elem above cause you havve to set the dispaly to none. you then reference that none in the showBody function below for the if/else

          not 100% sure why you need to create a new elem subjElem below tho and cant just reference the subjBox instead. 

          the subjELem created below is set to the elemnets that we want to add our event listner too. bedcause there are mutiple subj's in our array elem we need to use for loop to go thru it and add the event listener to every subj. 

          once we step inside the function 'show body' is when we start talking about what we want to happen when we click. for this one we need an if / else statment cause it needs to eitehr be 'on' or 'off'. 

          querySelectorAll returns all children classes in the CSS. So the click functionality is attached to the parent and the child will show the effect of the event.


          */

          var subjElem = document.getElementsByClassName("subj");  

          for (var i = 0; i<subjElem.length; i++){
            subjElem[i].addEventListener("click", showBody);
          }

          function showBody (){
            var displayBody = this.querySelectorAll(".body")[0];
            if(displayBody.style.display === "none") {
              displayBody.style.display = "inline";
          } else {
            displayBody.style.display = "none";
          }
          }

        

        

        function myFunction () { 
        
         var newMail = getNewMessage();

         var newBox = document.createElement("p");
         newBox.className = 'newBox';
         main.appendChild(newBox);

         var newSender = document.createElement("p");
         newSender.className = 'newSender';
         newSender.innerHTML = newMail.sender;
         newBox.appendChild(newSender);

         var newSubject = document.createElement("p");
         newSubject.className = 'newSubject';
         newSubject.innerHTML = newMail.subject;
         newBox.appendChild(newSubject);

         var newDate = document.createElement("p");
         newDate.className = 'newDate';
         newDate.innerHTML = newMail.date;
         newBox.appendChild(newDate);

         var newBody = document.createElement("p");
         newBody.className = 'newBody';
         newBody.innerHTML = newMail.body;
         newBody.style.display = 'none';
         newSubject.appendChild(newBody);

         counter.innerHTML = "Inbox" + " (" + (geemails.length++) + ")";
         main.appendChild(counter);


         var newSubjElem = document.getElementsByClassName('newSubject');

         for (var i = 0; i<newSubjElem.length; i++) {
          newSubjElem[i].addEventListener("click", showNewBody)
         }

         function showNewBody(){
           var displayNewBody = this.querySelectorAll('.newBody')[0];
            if(displayNewBody.style.display === "none") {
              displayNewBody.style.display = "inline";
          } else {
            displayNewBody.style.display = "none";
          }
         }
         
        }
          setInterval(myFunction, 2000);

          


       // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        
      };
    </script>
	</head>
	<h1> G-Easy Mail </h1>
	<body>
		
		<div class="container" id="main">
			



  
		</div>
	</body>
</html>